# 概率知识点
## 概率分布
离散变量的概率分布：  
**伯努利分布**：随机变量 $X$ 只取0和1两个值，取值为1的概率为 $p$。
$$P(X=k)=p^k(1-p)^{1-k}$$
$$E(X)=p$$
$$D(X)=E(X^2)-[E(X)]^2=p(1-p)$$
**二项分布**：在n次独立重复的伯努利试验中，成功次数的概率分布。$X\sim B(n,p)$
$$P(X=k)=C_n^kp^k(1-p)^{n-k}$$
$$E(X)=np$$
$$D(X)=np(1-p)$$
**几何分布**：在n次伯努利试验中，试验k次才得到第一次成功的机率。$X\sim \text{GE}(p)$  
$$P(X=k)=(1-p)^{k-1}p$$
$$E(X)=\frac{1}{p}$$
$$D(X)=\frac{1-p}{p^2}$$
**泊松分布**：单位时间内随机事件发生次数的概率分布。$X\sim \pi(\lambda)$
$$P(X=k)=\frac{\lambda^k}{k!}e^{-\lambda},\quad k=0,1,\cdots$$
$$E(X)=\lambda$$
$$D(X)=\lambda$$
伯努利分布是二项分布在 $n=1$ 时的特殊情况。  
当二项分布的n很大而p很小时，泊松分布可作为二项分布的近似，其中 $\lambda=np$。  
连续变量的概率分布：  
**均匀分布**：$X\sim U(a,b)$
$$f(x)=\left\lbrace\begin{aligned}
&\frac{1}{b-a} \quad &a<x<b \newline  
&0 \quad &else
\end{aligned}\right.$$
$$E(X)=\frac{a+b}{2}$$
$$D(X)=\frac{(b-a)^2}{12}$$
**高斯分布**：$X\sim N(\mu,\sigma^2)$
$$f(x)=\frac{1}{\sqrt{2\pi}\sigma}\exp\left(-\frac{(x-\mu)^2}{2\sigma^2}\right)$$
$$E(X)=\mu$$
$$D(X)=\sigma^2$$
## 期望方差协方差相关系数
***期望*** 反映随机变量平均取值的大小：
$$E(X)=\sum_{k=1}^{\infty}x_kp_k$$
$$E(X)=\int_{-\infty}^{\infty}xf(x)dx$$
***方差*** 衡量随机变量的离散程度。
$$D(X)=E\left[(X-E(X))^2\right]=E(X^2)-[E(X)]^2$$
***协方差*** 衡量两个变量的总体误差，如果两个变量的变化趋势一致，即如果其中一个大于自身的期望值，另外一个也大于自身的期望值，那么两个变量之间的协方差就是正值，否则就是负值。  
若两个随机变量相互独立，则协方差为0；协方差为0，则这两个随机变量是不相关的，而不一定独立。“不相关”是一个比“独立”要弱的概念。
$$Cov(X,Y)=E\left[(X-E(X))(Y-E(Y))\right]=E(XY)-E(X)E(Y)$$
***相关系数*** 研究变量之间的线性相关程度，常用皮尔逊相关系数。
$$\rho_{XY}=\frac{Cov(X,Y)}{\sqrt{Var[X]Var[Y]}}$$
$|\rho_{XY}|\leq1$，$|\rho_{XY}|$ 越大，线性相关程度越大。$|\rho_{XY}|=1$ 对应线性相关，$\rho_{XY}=0$ 对应不存在线性关系。
## 排列组合
$$A_n^m=n(n-1)(n-2)\cdots(n-m+1)=\frac{n!}{(n-m)!}$$
$$C_n^m=\frac{A_n^m}{m!}=\frac{n!}{m!(n-m)!}$$
# 常见题目
## 概率
(1) **54张牌，分3组，大王小王同在一组的概率？**  
总分法：$N=C_{54}^{18}\times C_{36}^{18}$  
大王小王同在一组的分法：$M=3\times C_{52}^{16}\times C_{36}^{18}$  
得到：$p=M/N=17/53$\  
(2) **假设一段公路上，1小时内有汽车经过的概率为96%，那么，30分钟内有汽车经过的概率为？**  
1小时有车的概率 = 1 - 1小时没车的概率 = 1 - (30分钟没车的概率)^2   
从而得到 30分钟内有汽车经过的概率 为80%。\  
(3) **三个宝箱A、B、C里有一个宝箱里有宝物，两个是空的，你选了A，主持人打开B发现没有宝物，问你换不换？**  
A有宝物的概率为1/3，BC有宝物的概率为2/3，而B没有，则C有宝物的概率为2/3，所以换。\  
(4) **一个家庭有两个孩子，已知其中一个是女孩，求另一个也是女孩的概率？**  
$(\frac{1}{2}\times\frac{1}{2})/(1-(\frac{1}{2}\times\frac{1}{2}))=1/3$\
(5) **一个圆上随机三个点组成锐角三角形的概率？**  
设在圆上任取的3点是A、B、C，圆心为O，先假定A、B的位置，设弦AB的圆心角为 $\theta$，则 $\theta\in(0,\pi)$，满足锐角三角形时，点C必须在AO延长线与BO延长线之间，所以此时为锐角三角形的概率 $p(Y|\theta)=\frac{\theta}{2\pi}$，对任意A、B的位置，为锐角三角形的概率为：$P(Y)=\int_{0}^{\pi}\frac{1}{\pi}\frac{\theta}{2\pi}d\theta$，得到 $\frac{1}{4}$。\     
(6) [反面概率为p，正面为(1-p)，求出现连续k次反面的次数期望E(k)](https://www.zhihu.com/question/59895916/answer/171112258)  
抛一枚均匀的硬币若干次，直到出现一次正面向上，所需次数的数学期望是多少？  *几何分布，数学期望为2*。  
抛一枚均匀的硬币若干次，直到出现连续两次正面向上，所需抛硬币总次数的数学期望是多少？  *期望为6*。\   
(7) **抛一个骰子，直到集齐六面，问抛骰子的期望次数？**  
[一个骰子，每个面至少被投出一次需要投多少次？](https://www.zhihu.com/question/40320381/answer/86092593)  
$E(I)$ 表示出现 $I$ 种点数这个事件所需要掷骰子的期望次数，则需要求 $E(6)$，而 $E(I+1)=E(I)+\frac{6}{6-I}$。注后面这个 $\frac{6-I}{6}$ 由几何分布的期望得到。由 $E(1)=1$，递归可得 $E(6)=14.7$。\  
(8) [投骰子连续两次是 6就停止，求投掷的次数的期望](https://blog.csdn.net/weixin_41888257/article/details/107595186)  
$x=6+(\frac{1}{6}\times1+\frac{5}{6}\times(1+x))$，得到42。\  
(9) **一根木棒，截成三截，组成三角形的概率是多少？**  
二维面积，画图，答案为 $\frac{1}{8}/\frac{1}{2}=\frac{1}{4}$\  
(10) **有一苹果，两个人抛硬币来决定谁吃这个苹果，先抛到正面者吃。问先抛这吃到苹果的概率是多少？**  
$p=\frac{1}{2}+\frac{1}{4}\times p$，得到 $p=\frac{2}{3}$\   
(11) **一个三角形，三个端点上有三只蚂蚁，蚂蚁可以绕任意边走，问蚂蚁不相撞的概率是多少？**  
每个蚂蚁在方向的选择上有且只有2种可能，共有3只蚂蚁，所以共有8种可能，而不相撞有2种可能，即全为顺时针方向或全为逆时针方向，则得到 $p=\frac{1}{4}$\   
(12) **商家发明一种扔筛子游戏，顾客扔到多少点就得到多少钱，但扔筛子之前顾客需要付一定数量的钱x，假设商家和顾客都足够聪明，1.顾客付一次钱可以扔一次的情况下，顾客能接受的最大x是多少，2.现在规则改为顾客付一次钱可以扔两次，顾客扔了第一次之后可以选择是否继续扔第二次，如果扔了第二次则以第二次的结果为准，如果没有扔第二次就以第一次的结果为准，这时顾客能接受的最大x为多少？**  
1.收益的期望为 $\frac{1}{6}\times(1+2+3+4+5+6)=3.5$，能接受的最大x就是他收益的期望值。  
2.考虑什么情况下会扔第二次，就是扔第二次得到钱变多的概率相对较大的时候，那么当第一次扔到1，2，3的时候会选择继续扔第二次，则这时候期望变为 $\frac{1}{6}\times(4+5+6)+\frac{1}{6}\times3.5\times3=4.25$。\    
(13) **已知一随机发生器，产生0的概率是p，产生1的概率是1-p，现在要你构造一个发生器，使得它产生0和1的概率均为1/2（随机数生成）？**  
连续产生两个数，则产生发现01和10组合的概率是相等的，只需要将其分别映射到0和1即可，即每次随机产生两个数，如果组合为00或11则丢弃，若为01则映射到1，若为10则映射到0，这样一来产生0和1的概率均为1/2。\  
(14) **已知一随机发生器，产生的数字的分布不清楚，现在要你构造一个发生器，使得它产生0和1的概率均为1/2（随机数生成）？**   
使用该随机发生器产生随机数a，b，有3种情况 $a>b$、$a<b$、$a==b$，其中大于和小于是对称的，发生的概率相等，只需要将这两种情况分别映射到0和1即可，遇到 $a==b$ 时忽略。\  
(15) **已知有个 rand7() 的函数，返回1到7随机自然数，怎样利用这个 rand7() 构造 rand10()，随机1~10？**  
产生随机数的主要原则是每个数出现的概率是相等的，如果可以得到一组等概率出现的数字，那么就可以从中找到映射为1到10的方法。  
利用 (rand7() - 1) X 7 + rand7() 产生随机数x，如果大于40则继续随机直到小于等于40为止，如果小于等于40，则产生的随机数为 (x - 1) // 4 + 1。\  
(16)  **一个木桶里面有M个白球，每分钟从桶中随机取出一个球涂成红色（无论白或红都涂红）再放回，问将桶中球全部涂红的期望时间是多少？**  
$E(i)$表示木桶里有$i$个红球时，还需要抽取多少时间可以将所有球都染成红色，则：  
$$E(i)=\frac{i}{M}\times[1+E(i)]+(1-\frac{i}{M})\times [1+E(i+1)]$$  
(17) **你有一把宝剑。每使用一个宝石，有50%的概率会成功让宝剑升一级，50%的概率会失败。如果宝剑的级数大于等于5的话，那么失败会使得宝剑降1级。如果宝剑的级数小于5的话，失败没有效果。问题是：期望用多少个宝石可以让一把1级的宝剑升到9级？**  
令$E(i)$表示宝剑从 $i-1$ 级升到 $i$ 级需要的宝石个数，则：  
$$E(i)=\left\lbrace\begin{aligned}
&2 \quad &2\leq i\leq5 \newline  
&\frac{1}{2}+\frac{1}{2}\times(1+E(i-1)+E(i)) \quad &i\geq6
\end{aligned}\right.$$
得到结果36。  
## 树
(1) **一个二叉树有100个子节点数为2的节点，100个子节点数为1的节点，那么个子节点数为0的节点（叶节点）的个数为？**  
假设该二叉树有 $n$ 个节点，则有 $n-1$ 条边，这是因为除了根节点，其余的每个节点都有且只有一个父节点，这是从下往上的思考。而从上往下思考，容易得到边的个数为 $0\times n_0 + 1\times n_1 + 2\times n_2$ 。从而有 $n-1=n_1+2\times n_2$，把 $n$ 用 $n_0+n_1+n_2$ 替换，得到 $n_0 = n_2 + 1$。  
## 排序
稳定排序：冒泡排序、插入排序、归并排序、计数排序、桶排序、基数排序；  
不稳定排序：选择排序、希尔排序、快速排序、堆排序。\  

冒泡排序、选择排序、插入排序的时间复杂度均为 $O(n^2)$；  
归并排序、堆排序的时间复杂度均为 $O(n \log n)$；  
快速排序的平均时间复杂度为 $O(n \log n)$，最坏时间复杂度为 $O(n^2)$。\  

归并排序占额外空间，快速排序由于递归实现，也占额外空间。\  

时间复杂度与初始排序无关：冒泡排序、选择排序、归并排序、堆排序；  
有关：改进的冒泡排序、插入排序、希尔排序、快速排序。  
## 其他
(1) **一个人向北走了一公里，向东走了一公里，又向南走了一公里，最后回到了最开始的起点，为什么？**  
[微软面试题](https://blog.csdn.net/Turinglife/article/details/7358061)  
南极点，刚好一个等边三角形；  
或者是一个一圈距离刚好是1公里的那个地方。向北走之后，达到那个地方，饶了一圈回到这个地方，再向南走回去。\   
(2) **一个四位数abcd，满足 $abcd\times4 = dcba$，求这个数？**  
$a \times 4$ 无进位仍为4位数，则 $a=1,2$，而 $d \times 4$的个位是 $a$，所以 $a=2$，则 $d=8$；  
$b \times 4$ 加上它的进位小于10，则 $b=0,1,2$，且 $c \times 4+3$ 的个位为 $b$；  
$b=0$：$c \times 4$ 的个位需要是7，不存在；  
$b=1$：$c \times 4$ 的个位需要是8，$c=2$ 不符合，$c=7$ 符合，即为2178；  
$b=2$：$c \times 4$ 的个位需要是9，不存在；\  
(3) **有一个3L、一个5L的桶，请量出4L的水？**  
5L桶装满水，倒入3L桶，此时5L中有2L水，3L桶中有3L水；  
3L桶全部倒走，将5L桶的2L水道入3L桶中，此时5L桶中没有水，3L桶中有2L水；  
将5L桶倒满水，然后向3L桶中倒水，此时3L桶水已满，5L桶中还剩4L水。  